"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(){var e=function a(){_classCallCheck(this,a)},t=function(e){function t(e,n,r,o){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));return i.studentId=e,i.tasks=[],i.name=n,i.mentorsPriorityList=void 0!==r?r:[],i}return _inherits(t,e),_createClass(t,[{key:"setMark",value:function(e,t){this.studMarks.push(_defineProperty({},e.id,t))}},{key:"id",set:function(e){throw new Error("Нельзя менять ID.")},get:function(){return this.studentId}},{key:"name",set:function(e){this.studentName=e},get:function(){return this.studentName}},{key:"team",set:function(e){this.studentTeam=e},get:function(){return this.studentTeam}}]),t}(e),n=function(e){function t(e,n,r){_classCallCheck(this,t);var o=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));return o.taskId=e,o.title=n,o.taskExecutors=void 0!==r?r:[],o}return _inherits(t,e),_createClass(t,[{key:"id",set:function(e){throw new Error("Нельзя менять ID.")},get:function(){return this.taskId}},{key:"title",set:function(e){this.taskTitle=e},get:function(){return this.taskTitle}}]),t}(e),r=function(e){function t(e,n,r){_classCallCheck(this,t);var o=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));return o.teamId=e,o.name=n,o.teamTeammates=void 0!==r?r:[],o}return _inherits(t,e),_createClass(t,[{key:"addTeammate",value:function(e){this.teamTeammates.push(e)}},{key:"removeTeammates",value:function(e){var t=this;e.forEach(function(e,n,r){var o=s.select(e);o||console.log("Студент "+e+" не найден.");var i=t.teamTeammates.indexOf(o);-1!==i&&t.teamTeammates.splice(i,1)})}},{key:"id",set:function(e){throw new Error("Нельзя менять ID.")},get:function(){return this.teamId}},{key:"name",set:function(e){this.teamName=e},get:function(){return this.teamName}}]),t}(e),o=function(e){function t(e,n,r){_classCallCheck(this,t);var o=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));return o.mentorId=e,o.name=n,o.preferredStudentsList=void 0!==r?r:[],o}return _inherits(t,e),_createClass(t,[{key:"id",set:function(e){throw new Error("Нельзя менять ID.")},get:function(){return this.mentorId}},{key:"name",set:function(e){this.mentorName=e},get:function(){return this.mentorName}},{key:"preferredStudentsList",set:function(e){if(("undefined"==typeof e?"undefined":_typeof(e))!==_typeof([]))throw new Error("Список должен быть массивом.")}}]),t}(e),i=0,s={add:function(e,a){if("undefined"==typeof e||0==e.length)throw new Error("Тип должен быть указан.");if("string"!=typeof e)throw new Error("Тип должен быть строкой");if("undefined"==typeof a||!("name"in a||"title"in a))throw new Error("Отсутствует 'options'. Задайте его хотя бы с одним свойством 'name' или 'title'.");if("object"!=("undefined"==typeof a?"undefined":_typeof(a)))throw new Error("Options должен быть объектом {}.");switch(e){case"student":var u=i++,f=new t(u,a.name,a.mentorsPriorityList);if(a.team){var c=this.select(a.team);c||(c=s.add("team",{name:a.team})),c.addTeammate(f),f.team=c}return s.students.push(f),console.log("Added new Student: "+f.name+"."),f;case"task":var l=i++,d=new n(l,a.title,a.executors);return s.tasks.push(d),console.log("Added new Task: "+d.title+"."),d;case"team":var m=i++,h=new r(m,a.name,a.teammates);return s.teams.push(h),console.log("Added new Team: "+h.name+"."),h;case"mentor":var p=i++,y=new o(p,a.name,a.preferredStudents);return s.mentors.push(y),console.log("Added new Mentor: "+y.name+"."),y;default:throw new Error("Типа '"+e+"' не существует.")}},edit:function(e,t){if("undefined"==typeof e||0==e.length)throw new Error("Селектор должен быть указан.");if("string"!=typeof e&&"number"!=typeof e)throw new Error("Селектор должен быть строкой или числом");if("undefined"==typeof t)throw new Error("Отсутствует 'options'. Задайте его хотя бы с одним свойством.");if("object"!=("undefined"==typeof t?"undefined":_typeof(t)))throw new Error("Options должен быть объектом {}.");var n=this.select(e);for(var r in t)"id"!=r&&(n[r]=t[r]);return n},students:[],mentors:[],tasks:[],teams:[],select:function(t){var n=void 0;if("number"!=typeof t&&isNaN(t)){if("string"==typeof t){if(s.students.forEach(function(e,r,o){e.name!=t||n||(n=e)}),n)return n;if(s.mentors.forEach(function(e,r,o){e.name!=t||n||(n=e)}),n)return n;if(s.tasks.forEach(function(e,r,o){e.title!=t||n||(n=e)}),n)return n;if(s.teams.forEach(function(e,r,o){e.name!=t||n||(n=e)}),n)return n}else if(t instanceof e)return t}else{var t=parseInt(t);if(s.students.forEach(function(e,r,o){e.id!=t||n||(n=e)}),n)return n;if(s.mentors.forEach(function(e,r,o){e.id!=t||n||(n=e)}),n)return n;if(s.tasks.forEach(function(e,r,o){e.id!=t||n||(n=e)}),n)return n;if(s.teams.forEach(function(e,r,o){e.id!=t||n||(n=e)}),n)return n}return void 0==n?!1:n}};new t("Никита");window.Lib=s}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwiU3R1ZGVudC5qcyIsIlRhc2suanMiLCJUZWFtLmpzIiwiTWVudG9yLmpzIl0sIm5hbWVzIjpbIl9kZWZpbmVQcm9wZXJ0eSIsIm9iaiIsImtleSIsInZhbHVlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsInNlbGYiLCJjYWxsIiwiUmVmZXJlbmNlRXJyb3IiLCJfaW5oZXJpdHMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJUeXBlRXJyb3IiLCJwcm90b3R5cGUiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIl90eXBlb2YiLCJTeW1ib2wiLCJpdGVyYXRvciIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiTGliT2JqZWN0IiwidGhpcyIsIlN0dWRlbnQiLCJfTGliT2JqZWN0IiwibmV3SWQiLCJuZXdOYW1lIiwibmV3TWVudG9ycyIsIm5ld1RlYW0iLCJfdGhpcyIsImdldFByb3RvdHlwZU9mIiwic3R1ZGVudElkIiwidGFza3MiLCJuYW1lIiwibWVudG9yc1ByaW9yaXR5TGlzdCIsInVuZGVmaW5lZCIsInRhc2siLCJtYXJrIiwic3R1ZE1hcmtzIiwicHVzaCIsImlkIiwic2V0IiwiRXJyb3IiLCJnZXQiLCJzdHIiLCJzdHVkZW50TmFtZSIsInN0dWRlbnRUZWFtIiwiVGFzayIsIl9MaWJPYmplY3QyIiwibmV3VGl0bGUiLCJuZXdFeGVjdXRvcnMiLCJfdGhpczIiLCJ0YXNrSWQiLCJ0aXRsZSIsInRhc2tFeGVjdXRvcnMiLCJ0YXNrVGl0bGUiLCJUZWFtIiwiX0xpYk9iamVjdDMiLCJuZXdUZWFtbWF0ZXMiLCJfdGhpczMiLCJ0ZWFtSWQiLCJ0ZWFtVGVhbW1hdGVzIiwic3R1ZGVudCIsImFyciIsImZvckVhY2giLCJpdGVtIiwiTGliIiwic2VsZWN0IiwiY29uc29sZSIsImxvZyIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsInRlYW1OYW1lIiwiTWVudG9yIiwiX0xpYk9iamVjdDQiLCJuZXdQcmVmZXJyZWRTdHVkZW50c0xpc3QiLCJfdGhpczQiLCJtZW50b3JJZCIsInByZWZlcnJlZFN0dWRlbnRzTGlzdCIsIm1lbnRvck5hbWUiLCJ1bmlxdWVJZCIsImFkZCIsInR5cGUiLCJvcHRpb25zIiwic3R1ZElkIiwibmV3U3R1ZGVudCIsInRlYW0iLCJ0ZWFtT2JqIiwiYWRkVGVhbW1hdGUiLCJzdHVkZW50cyIsIm5ld1Rhc2siLCJleGVjdXRvcnMiLCJ0ZWFtbWF0ZXMiLCJ0ZWFtcyIsIm5ld01lbnRvciIsInByZWZlcnJlZFN0dWRlbnRzIiwibWVudG9ycyIsImVkaXQiLCJzZWxlY3RvciIsIm9iamVjdCIsInByb3AiLCJyZXN1bHQiLCJpc05hTiIsInBhcnNlSW50Iiwid2luZG93Il0sIm1hcHBpbmdzIjoiQUFBQSxZQU1BLFNBQVNBLGlCQUFnQkMsRUFBS0MsRUFBS0MsR0FBaUssTUFBcEpELEtBQU9ELEdBQU9HLE9BQU9DLGVBQWVKLEVBQUtDLEdBQU9DLE1BQU9BLEVBQU9HLFlBQVksRUFBTUMsY0FBYyxFQUFNQyxVQUFVLElBQWtCUCxFQUFJQyxHQUFPQyxFQUFnQkYsRUFFM00sUUFBU1EsNEJBQTJCQyxFQUFNQyxHQUFRLElBQUtELEVBQVEsS0FBTSxJQUFJRSxnQkFBZSw0REFBZ0UsUUFBT0QsR0FBeUIsZ0JBQVRBLElBQXFDLGtCQUFUQSxHQUE4QkQsRUFBUEMsRUFFbE8sUUFBU0UsV0FBVUMsRUFBVUMsR0FBYyxHQUEwQixrQkFBZkEsSUFBNEMsT0FBZkEsRUFBdUIsS0FBTSxJQUFJQyxXQUFVLGlFQUFvRUQsR0FBZUQs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LEVBQUFyQyxLQUdBcUMsRUFBQSxNQUFBQSxFQVFBLElBTEFwQyxFQUFBNEIsTUFBQTlCLFFBQUEsU0FBQUMsRUFBQWpELEVBQUErQyxHQUNBRSxFQUFBekIsSUFBQTJELEdBQUFHLElBQ0FBLEVBQUFyQyxLQUdBcUMsRUFBQSxNQUFBQSxHQXdDQSxNQUFBbkUsU0FBQW1FLEdBQ0EsRUFHQUEsR0FLQSxJQUFBL0UsR0FBQSxTQUNBa0YsUUFBQXZDLElBQUFBIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuKGZ1bmN0aW9uKCl7XG5cbmNsYXNzIExpYk9iamVjdCB7XG5cbn1cblxuY2xhc3MgU3R1ZGVudCBleHRlbmRzIExpYk9iamVjdCB7XG5cdGNvbnN0cnVjdG9yKG5ld0lkLCBuZXdOYW1lLCBuZXdNZW50b3JzLCBuZXdUZWFtKSB7XG5cdFx0c3VwZXIoKTtcblx0XHR0aGlzLnN0dWRlbnRJZCA9IG5ld0lkO1xuXHRcdHRoaXMudGFza3MgPSBbXTtcblx0XHR0aGlzLm5hbWUgPSBuZXdOYW1lO1xuXHRcdC8vIGlmIChuZXdUZWFtICE9PSB1bmRlZmluZWQpIHRoaXMudGVhbSA9IG5ld1RlYW07XG5cdFx0dGhpcy5tZW50b3JzUHJpb3JpdHlMaXN0ID0gKG5ld01lbnRvcnMgIT09IHVuZGVmaW5lZClcblx0XHRcdD8gbmV3TWVudG9yc1xuXHRcdFx0OiBbXTtcblx0fVxuXG5cdHNldE1hcmsodGFzaywgbWFyaykge1xuXHRcdHRoaXMuc3R1ZE1hcmtzLnB1c2goe1t0YXNrLmlkXTogbWFya30pO1xuXHR9XG5cblx0c2V0IGlkKG5ld0lkKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCfQndC10LvRjNC30Y8g0LzQtdC90Y/RgtGMIElELicpO1xuXHRcdHJldHVybjtcblx0fVxuXHRnZXQgaWQoKSB7XG5cdFx0cmV0dXJuIHRoaXMuc3R1ZGVudElkO1xuXHR9XG5cblx0c2V0IG5hbWUoc3RyKSB7XG5cdFx0dGhpcy5zdHVkZW50TmFtZSA9IHN0cjtcblx0fVxuXHRnZXQgbmFtZSgpe1xuXHRcdHJldHVybiB0aGlzLnN0dWRlbnROYW1lO1xuXHR9XG5cblx0c2V0IHRlYW0ob2JqKSB7XG5cdFx0dGhpcy5zdHVkZW50VGVhbSA9IG9iajtcblx0fVxuXHRnZXQgdGVhbSgpIHtcblx0XHRyZXR1cm4gdGhpcy5zdHVkZW50VGVhbTtcblx0fVxuXG5cdC8vIHNldCBtYXJrcyhhcnIpIHtcblx0Ly8gXHR0aGlzLnN0dWRNYXJrcyA9IGFycjtcblx0Ly8gfVxuXG5cblx0Ly8gZ2V0IG1hcmtzKCkge1xuXHQvLyBcdHJldHVybiB0aGlzLnN0dWRNYXJrcztcblx0Ly8gfVxuXG59XG5jbGFzcyBUYXNrIGV4dGVuZHMgTGliT2JqZWN0IHtcblx0Y29uc3RydWN0b3IobmV3SWQsIG5ld1RpdGxlLCBuZXdFeGVjdXRvcnMpIHtcblx0XHRzdXBlcigpO1xuXHRcdHRoaXMudGFza0lkID0gbmV3SWQ7XG5cdFx0dGhpcy50aXRsZSA9IG5ld1RpdGxlO1xuXHRcdHRoaXMudGFza0V4ZWN1dG9ycyA9IChuZXdFeGVjdXRvcnMgIT09IHVuZGVmaW5lZClcblx0XHRcdD8gbmV3RXhlY3V0b3JzXG5cdFx0XHQ6IFtdO1xuXHR9XG5cblx0c2V0IGlkKG5ld0lkKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCfQndC10LvRjNC30Y8g0LzQtdC90Y/RgtGMIElELicpO1xuXHRcdHJldHVybjtcblx0fVxuXHRnZXQgaWQoKSB7XG5cdFx0cmV0dXJuIHRoaXMudGFza0lkO1xuXHR9XG5cblx0c2V0IHRpdGxlKHN0cikge1xuXHRcdHRoaXMudGFza1RpdGxlID0gc3RyO1xuXHR9XG5cdGdldCB0aXRsZSgpe1xuXHRcdHJldHVybiB0aGlzLnRhc2tUaXRsZTtcblx0fVxuXG5cblxufVxuY2xhc3MgVGVhbSBleHRlbmRzIExpYk9iamVjdCB7XG5cdGNvbnN0cnVjdG9yKG5ld0lkLCBuZXdOYW1lLCBuZXdUZWFtbWF0ZXMpIHtcblx0XHRzdXBlcigpO1xuXHRcdHRoaXMudGVhbUlkID0gbmV3SWQ7XG5cdFx0dGhpcy5uYW1lID0gbmV3TmFtZTtcblx0XHR0aGlzLnRlYW1UZWFtbWF0ZXMgPSAobmV3VGVhbW1hdGVzICE9PSB1bmRlZmluZWQpIFxuXHRcdFx0PyBuZXdUZWFtbWF0ZXNcblx0XHRcdDogW107XG5cdH1cblxuXHRzZXQgaWQobmV3SWQpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoJ9Cd0LXQu9GM0LfRjyDQvNC10L3Rj9GC0YwgSUQuJyk7XG5cdFx0cmV0dXJuO1xuXHR9XG5cdGdldCBpZCgpIHtcblx0XHRyZXR1cm4gdGhpcy50ZWFtSWQ7XG5cdH1cblxuXHRzZXQgbmFtZShzdHIpIHtcblx0XHR0aGlzLnRlYW1OYW1lID0gc3RyO1xuXHR9XG5cdGdldCBuYW1lKCl7XG5cdFx0cmV0dXJuIHRoaXMudGVhbU5hbWU7XG5cdH1cblxuXHRhZGRUZWFtbWF0ZShzdHVkZW50KSB7XG5cdFx0dGhpcy50ZWFtVGVhbW1hdGVzLnB1c2goc3R1ZGVudCk7XG5cdH1cblxuXHRyZW1vdmVUZWFtbWF0ZXMoYXJyKSB7XG5cdFx0bGV0IHNlbGYgPSB0aGlzO1xuXHRcdGFyci5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGksIGFycil7XG5cdFx0XHRsZXQgc3R1ZGVudCA9IExpYi5zZWxlY3QoaXRlbSk7XG5cdFx0XHRpZiAoIXN0dWRlbnQpIGNvbnNvbGUubG9nKCfQodGC0YPQtNC10L3RgiAnKyBpdGVtICsnINC90LUg0L3QsNC50LTQtdC9LicpO1xuXHRcdFx0bGV0IGluZGV4ID0gc2VsZi50ZWFtVGVhbW1hdGVzLmluZGV4T2Yoc3R1ZGVudCk7XG5cdFx0XHRpZiAoaW5kZXggIT09IC0xKSB7XG5cdFx0XHRcdHNlbGYudGVhbVRlYW1tYXRlcy5zcGxpY2UoaW5kZXgsMSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cbn1cbmNsYXNzIE1lbnRvciBleHRlbmRzIExpYk9iamVjdCB7XG5cdGNvbnN0cnVjdG9yKG5ld0lkLCBuZXdOYW1lLCBuZXdQcmVmZXJyZWRTdHVkZW50c0xpc3QpIHtcblx0XHRzdXBlcigpO1xuXHRcdHRoaXMubWVudG9ySWQgPSBuZXdJZDtcblx0XHR0aGlzLm5hbWUgPSBuZXdOYW1lO1xuXHRcdHRoaXMucHJlZmVycmVkU3R1ZGVudHNMaXN0ID0gKG5ld1ByZWZlcnJlZFN0dWRlbnRzTGlzdCAhPT0gdW5kZWZpbmVkKVxuXHRcdFx0PyBuZXdQcmVmZXJyZWRTdHVkZW50c0xpc3Rcblx0XHRcdDogW107XG5cdH1cblxuXHRzZXQgaWQobmV3SWQpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoJ9Cd0LXQu9GM0LfRjyDQvNC10L3Rj9GC0YwgSUQuJyk7XG5cdFx0cmV0dXJuO1xuXHR9XG5cdGdldCBpZCgpIHtcblx0XHRyZXR1cm4gdGhpcy5tZW50b3JJZDtcblx0fVxuXG5cdHNldCBuYW1lKHN0cikge1xuXHRcdHRoaXMubWVudG9yTmFtZSA9IHN0cjtcblx0fVxuXHRnZXQgbmFtZSgpe1xuXHRcdHJldHVybiB0aGlzLm1lbnRvck5hbWU7XG5cdH1cblxuXHRzZXQgcHJlZmVycmVkU3R1ZGVudHNMaXN0KGFycikge1xuXHRcdGlmICh0eXBlb2YgYXJyICE9PSB0eXBlb2YgW10gKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ9Ch0L/QuNGB0L7QuiDQtNC+0LvQttC10L0g0LHRi9GC0Ywg0LzQsNGB0YHQuNCy0L7QvC4nKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdH1cblxuXHRcbn1cblxudmFyIHVuaXF1ZUlkID0gMDtcblxudmFyIExpYiA9IHtcblxuXHRhZGQ6IGZ1bmN0aW9uKHR5cGUsIG9wdGlvbnMsIC4uLmFyZ3Mpe1xuXG5cdFx0Ly8g0J7QsdGA0LDQsdC+0YLQutCwINC+0YjQuNCx0L7QulxuXHRcdGlmICgodHlwZW9mIHR5cGUgPT09ICd1bmRlZmluZWQnKSB8fCAodHlwZS5sZW5ndGggPT0gMCkpXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ9Ci0LjQvyDQtNC+0LvQttC10L0g0LHRi9GC0Ywg0YPQutCw0LfQsNC9LicpXG5cdFx0ZWxzZSBpZiAodHlwZW9mIHR5cGUgIT0gJ3N0cmluZycpXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ9Ci0LjQvyDQtNC+0LvQttC10L0g0LHRi9GC0Ywg0YHRgtGA0L7QutC+0LknKTtcblx0XHRcblx0XHRpZiAoKHR5cGVvZiBvcHRpb25zID09PSAndW5kZWZpbmVkJykgfHwgKCEoJ25hbWUnIGluIG9wdGlvbnMpICYmICEoJ3RpdGxlJyBpbiBvcHRpb25zKSkpXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ9Ce0YLRgdGD0YLRgdGC0LLRg9C10YIgXFwnb3B0aW9uc1xcJy4g0JfQsNC00LDQudGC0LUg0LXQs9C+INGF0L7RgtGPINCx0Ysg0YEg0L7QtNC90LjQvCDRgdCy0L7QudGB0YLQstC+0LwgXFwnbmFtZVxcJyDQuNC70LggXFwndGl0bGVcXCcuJylcblx0XHRlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucyAhPSAnb2JqZWN0Jylcblx0XHRcdHRocm93IG5ldyBFcnJvcignT3B0aW9ucyDQtNC+0LvQttC10L0g0LHRi9GC0Ywg0L7QsdGK0LXQutGC0L7QvCB7fS4nKTtcblxuXHRcdC8vINCU0L7QsdCw0LLQu9C10L3QuNC1INC+0LHRitC10LrRgtCwXG5cdFx0c3dpdGNoICh0eXBlKSB7XG5cdFx0XHRcblx0XHRcdGNhc2UgJ3N0dWRlbnQnOlxuXHRcdFx0XHRsZXQgc3R1ZElkID0gdW5pcXVlSWQrKztcblx0XHRcdFx0bGV0IG5ld1N0dWRlbnQgPSBuZXcgU3R1ZGVudChzdHVkSWQsIG9wdGlvbnMubmFtZSwgb3B0aW9ucy5tZW50b3JzUHJpb3JpdHlMaXN0KTtcblxuXHRcdFx0XHRpZiAob3B0aW9ucy50ZWFtKSB7XG5cdFx0XHRcdFx0bGV0IHRlYW1PYmogPSB0aGlzLnNlbGVjdChvcHRpb25zLnRlYW0pO1xuXHRcdFx0XHRcdGlmICghdGVhbU9iaikge1xuXHRcdFx0XHRcdFx0dGVhbU9iaiA9IExpYi5hZGQoJ3RlYW0nLCB7bmFtZTogb3B0aW9ucy50ZWFtfSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRlYW1PYmouYWRkVGVhbW1hdGUobmV3U3R1ZGVudCk7XG5cdFx0XHRcdFx0bmV3U3R1ZGVudC50ZWFtID0gdGVhbU9iajtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0TGliLnN0dWRlbnRzLnB1c2gobmV3U3R1ZGVudCk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdBZGRlZCBuZXcgU3R1ZGVudDogJysgbmV3U3R1ZGVudC5uYW1lICsnLicpO1xuXHRcdFx0XHRyZXR1cm4gbmV3U3R1ZGVudDtcblx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlICd0YXNrJzpcblx0XHRcdFx0bGV0IHRhc2tJZCA9IHVuaXF1ZUlkKys7XG5cdFx0XHRcdGxldCBuZXdUYXNrID0gbmV3IFRhc2sodGFza0lkLCBvcHRpb25zLnRpdGxlLCBvcHRpb25zLmV4ZWN1dG9ycyk7XG5cdFx0XHRcdExpYi50YXNrcy5wdXNoKG5ld1Rhc2spO1xuXHRcdFx0XHRjb25zb2xlLmxvZygnQWRkZWQgbmV3IFRhc2s6ICcrIG5ld1Rhc2sudGl0bGUgKycuJyk7XG5cdFx0XHRcdHJldHVybiBuZXdUYXNrO1xuXHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgJ3RlYW0nOlxuXHRcdFx0XHRsZXQgdGVhbUlkID0gdW5pcXVlSWQrKztcblx0XHRcdFx0bGV0IG5ld1RlYW0gPSBuZXcgVGVhbSh0ZWFtSWQsIG9wdGlvbnMubmFtZSwgb3B0aW9ucy50ZWFtbWF0ZXMpO1xuXHRcdFx0XHRMaWIudGVhbXMucHVzaChuZXdUZWFtKTtcblx0XHRcdFx0Y29uc29sZS5sb2coJ0FkZGVkIG5ldyBUZWFtOiAnKyBuZXdUZWFtLm5hbWUgKycuJyk7XG5cdFx0XHRcdHJldHVybiBuZXdUZWFtO1xuXHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgJ21lbnRvcic6XG5cdFx0XHRcdGxldCBtZW50b3JJZCA9IHVuaXF1ZUlkKys7XG5cdFx0XHRcdGxldCBuZXdNZW50b3IgPSBuZXcgTWVudG9yKG1lbnRvcklkLCBvcHRpb25zLm5hbWUsIG9wdGlvbnMucHJlZmVycmVkU3R1ZGVudHMpXG5cdFx0XHRcdExpYi5tZW50b3JzLnB1c2gobmV3TWVudG9yKTtcblx0XHRcdFx0Y29uc29sZS5sb2coJ0FkZGVkIG5ldyBNZW50b3I6ICcrIG5ld01lbnRvci5uYW1lICsnLicpO1xuXHRcdFx0XHRyZXR1cm4gbmV3TWVudG9yO1xuXHRcdFx0YnJlYWs7XG5cblx0XHRcdC8vINCV0YHQu9C4INGC0LjQvyDQt9Cw0LTQsNC9INC90LXQstC10YDQvdC+XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ9Ci0LjQv9CwIFxcJycrIHR5cGUgKydcXCcg0L3QtSDRgdGD0YnQtdGB0YLQstGD0LXRgi4nKTtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fSxcblxuXHRlZGl0OiBmdW5jdGlvbihzZWxlY3Rvciwgb3B0aW9ucykge1xuXG5cdFx0Ly8g0J7QsdGA0LDQsdC+0YLQutCwINC+0YjQuNCx0L7QulxuXHRcdGlmICgodHlwZW9mIHNlbGVjdG9yID09PSAndW5kZWZpbmVkJykgfHwgKHNlbGVjdG9yLmxlbmd0aCA9PSAwKSlcblx0XHRcdHRocm93IG5ldyBFcnJvcign0KHQtdC70LXQutGC0L7RgCDQtNC+0LvQttC10L0g0LHRi9GC0Ywg0YPQutCw0LfQsNC9LicpXG5cdFx0ZWxzZSBpZiAoKHR5cGVvZiBzZWxlY3RvciAhPSAnc3RyaW5nJykgJiYgKHR5cGVvZiBzZWxlY3RvciAhPSAnbnVtYmVyJykpXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ9Ch0LXQu9C10LrRgtC+0YAg0LTQvtC70LbQtdC9INCx0YvRgtGMINGB0YLRgNC+0LrQvtC5INC40LvQuCDRh9C40YHQu9C+0LwnKTtcblx0XHRcblx0XHRpZiAodHlwZW9mIG9wdGlvbnMgPT09ICd1bmRlZmluZWQnKVxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCfQntGC0YHRg9GC0YHRgtCy0YPQtdGCIFxcJ29wdGlvbnNcXCcuINCX0LDQtNCw0LnRgtC1INC10LPQviDRhdC+0YLRjyDQsdGLINGBINC+0LTQvdC40Lwg0YHQstC+0LnRgdGC0LLQvtC8LicpXG5cdFx0ZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMgIT0gJ29iamVjdCcpXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ09wdGlvbnMg0LTQvtC70LbQtdC9INCx0YvRgtGMINC+0LHRitC10LrRgtC+0Lwge30uJyk7XG5cblx0XHQvLyDQn9GA0LDQstC60LAg0L7QsdGK0LXQutGC0LBcblx0XHR2YXIgb2JqZWN0ID0gdGhpcy5zZWxlY3Qoc2VsZWN0b3IpO1xuXHRcdGZvciAobGV0IHByb3AgaW4gb3B0aW9ucykge1xuXHRcdFx0aWYgKHByb3AgPT0gJ2lkJykgY29udGludWU7XG5cdFx0XHRvYmplY3RbcHJvcF0gPSBvcHRpb25zW3Byb3BdO1xuXHRcdH1cblx0XHRyZXR1cm4gb2JqZWN0O1xuXG5cdH0sXG5cblx0c3R1ZGVudHM6IFtdLFxuXHRtZW50b3JzOiBbXSxcblx0dGFza3M6IFtdLFxuXHR0ZWFtczogW10sXG5cblx0c2VsZWN0OiBmdW5jdGlvbihzZWxlY3Rvcikge1xuXHRcdHZhciByZXN1bHQgPSB1bmRlZmluZWQ7XG5cdFx0aWYgKCh0eXBlb2Ygc2VsZWN0b3IgPT09ICdudW1iZXInKSB8fCAhaXNOYU4oc2VsZWN0b3IpKSB7XG5cdFx0XHR2YXIgc2VsZWN0b3IgPSBwYXJzZUludChzZWxlY3Rvcik7XG5cblx0XHRcdExpYi5zdHVkZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGksIGFycikge1xuXHRcdFx0XHRpZiAoKGl0ZW0uaWQgPT0gc2VsZWN0b3IpICYmICFyZXN1bHQpIHtcblx0XHRcdFx0XHRyZXN1bHQgPSBpdGVtO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdGlmIChyZXN1bHQpIHJldHVybiByZXN1bHQ7XG5cblx0XHRcdFxuXHRcdFx0TGliLm1lbnRvcnMuZm9yRWFjaChmdW5jdGlvbihpdGVtLCBpLCBhcnIpIHtcblx0XHRcdFx0aWYgKChpdGVtLmlkID09IHNlbGVjdG9yKSAmJiAhcmVzdWx0KSB7XG5cdFx0XHRcdFx0cmVzdWx0ID0gaXRlbTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRpZiAocmVzdWx0KSByZXR1cm4gcmVzdWx0O1xuXHRcdFx0XG5cdFx0XHRcblx0XHRcdExpYi50YXNrcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGksIGFycikge1xuXHRcdFx0XHRpZiAoKGl0ZW0uaWQgPT0gc2VsZWN0b3IpICYmICFyZXN1bHQpIHtcblx0XHRcdFx0XHRyZXN1bHQgPSBpdGVtO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdGlmIChyZXN1bHQpIHJldHVybiByZXN1bHQ7XG5cdFx0XHRcblx0XHRcdFxuXHRcdFx0TGliLnRlYW1zLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaSwgYXJyKSB7XG5cdFx0XHRcdGlmICgoaXRlbS5pZCA9PSBzZWxlY3RvcikgJiYgIXJlc3VsdCkge1xuXHRcdFx0XHRcdHJlc3VsdCA9IGl0ZW07XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0aWYgKHJlc3VsdCkgcmV0dXJuIHJlc3VsdDtcblx0XHRcdFxuXG5cdFx0fSBlbHNlIGlmICh0eXBlb2Ygc2VsZWN0b3IgPT0gJ3N0cmluZycpIHtcblxuXHRcdFx0TGliLnN0dWRlbnRzLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaSwgYXJyKSB7XG5cdFx0XHRcdGlmICgoaXRlbS5uYW1lID09IHNlbGVjdG9yKSAmJiAhcmVzdWx0KSB7XG5cdFx0XHRcdFx0cmVzdWx0ID0gaXRlbTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRpZiAocmVzdWx0KSByZXR1cm4gcmVzdWx0O1xuXG5cdFx0XHRcblx0XHRcdExpYi5tZW50b3JzLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaSwgYXJyKSB7XG5cdFx0XHRcdGlmICgoaXRlbS5uYW1lID09IHNlbGVjdG9yKSAmJiAhcmVzdWx0KSB7XG5cdFx0XHRcdFx0cmVzdWx0ID0gaXRlbTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRpZiAocmVzdWx0KSByZXR1cm4gcmVzdWx0O1xuXHRcdFx0XG5cdFx0XHRcblx0XHRcdExpYi50YXNrcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGksIGFycikge1xuXHRcdFx0XHRpZiAoKGl0ZW0udGl0bGUgPT0gc2VsZWN0b3IpICYmICFyZXN1bHQpIHtcblx0XHRcdFx0XHRyZXN1bHQgPSBpdGVtO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdGlmIChyZXN1bHQpIHJldHVybiByZXN1bHQ7XG5cdFx0XHRcblx0XHRcdFxuXHRcdFx0TGliLnRlYW1zLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaSwgYXJyKSB7XG5cdFx0XHRcdGlmICgoaXRlbS5uYW1lID09IHNlbGVjdG9yKSAmJiAhcmVzdWx0KSB7XG5cdFx0XHRcdFx0cmVzdWx0ID0gaXRlbTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRpZiAocmVzdWx0KSByZXR1cm4gcmVzdWx0O1xuXG5cdFx0fSBlbHNlIGlmIChzZWxlY3RvciBpbnN0YW5jZW9mIExpYk9iamVjdCkge1xuXHRcdFx0cmV0dXJuIHNlbGVjdG9yO1xuXHRcdH1cblxuXHRcdGlmIChyZXN1bHQgPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHQvLyB0aHJvdyBuZXcgRXJyb3IoJ9Ce0LHRitC10LrRgiAnK3NlbGVjdG9yKycg0L3QtSDQvdCw0LnQtNC10L0nKTtcblx0XHR9XG5cdFx0cmV0dXJuIHJlc3VsdDtcblxuXHR9XG59O1xuXG52YXIgdXNlciA9IG5ldyBTdHVkZW50KCfQndC40LrQuNGC0LAnKTtcbndpbmRvdy5MaWIgPSBMaWI7XG4vLyBMaWIuc3R1ZGVudHMucHVzaChuZXcgU3R1ZGVudCgn0J3QuNC60LjRgtCwJykpO1xuLy8gTGliLnN0dWRlbnRzLnB1c2gobmV3IFN0dWRlbnQoJ9Cb0LXRgdGPJykpO1xufSkoKTsiLCJjbGFzcyBTdHVkZW50IGV4dGVuZHMgTGliT2JqZWN0IHtcblx0Y29uc3RydWN0b3IobmV3SWQsIG5ld05hbWUsIG5ld01lbnRvcnMsIG5ld1RlYW0pIHtcblx0XHRzdXBlcigpO1xuXHRcdHRoaXMuc3R1ZGVudElkID0gbmV3SWQ7XG5cdFx0dGhpcy50YXNrcyA9IFtdO1xuXHRcdHRoaXMubmFtZSA9IG5ld05hbWU7XG5cdFx0Ly8gaWYgKG5ld1RlYW0gIT09IHVuZGVmaW5lZCkgdGhpcy50ZWFtID0gbmV3VGVhbTtcblx0XHR0aGlzLm1lbnRvcnNQcmlvcml0eUxpc3QgPSAobmV3TWVudG9ycyAhPT0gdW5kZWZpbmVkKVxuXHRcdFx0PyBuZXdNZW50b3JzXG5cdFx0XHQ6IFtdO1xuXHR9XG5cblx0c2V0TWFyayh0YXNrLCBtYXJrKSB7XG5cdFx0dGhpcy5zdHVkTWFya3MucHVzaCh7W3Rhc2suaWRdOiBtYXJrfSk7XG5cdH1cblxuXHRzZXQgaWQobmV3SWQpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoJ9Cd0LXQu9GM0LfRjyDQvNC10L3Rj9GC0YwgSUQuJyk7XG5cdFx0cmV0dXJuO1xuXHR9XG5cdGdldCBpZCgpIHtcblx0XHRyZXR1cm4gdGhpcy5zdHVkZW50SWQ7XG5cdH1cblxuXHRzZXQgbmFtZShzdHIpIHtcblx0XHR0aGlzLnN0dWRlbnROYW1lID0gc3RyO1xuXHR9XG5cdGdldCBuYW1lKCl7XG5cdFx0cmV0dXJuIHRoaXMuc3R1ZGVudE5hbWU7XG5cdH1cblxuXHRzZXQgdGVhbShvYmopIHtcblx0XHR0aGlzLnN0dWRlbnRUZWFtID0gb2JqO1xuXHR9XG5cdGdldCB0ZWFtKCkge1xuXHRcdHJldHVybiB0aGlzLnN0dWRlbnRUZWFtO1xuXHR9XG5cblx0Ly8gc2V0IG1hcmtzKGFycikge1xuXHQvLyBcdHRoaXMuc3R1ZE1hcmtzID0gYXJyO1xuXHQvLyB9XG5cblxuXHQvLyBnZXQgbWFya3MoKSB7XG5cdC8vIFx0cmV0dXJuIHRoaXMuc3R1ZE1hcmtzO1xuXHQvLyB9XG5cbn0iLCJjbGFzcyBUYXNrIGV4dGVuZHMgTGliT2JqZWN0IHtcblx0Y29uc3RydWN0b3IobmV3SWQsIG5ld1RpdGxlLCBuZXdFeGVjdXRvcnMpIHtcblx0XHRzdXBlcigpO1xuXHRcdHRoaXMudGFza0lkID0gbmV3SWQ7XG5cdFx0dGhpcy50aXRsZSA9IG5ld1RpdGxlO1xuXHRcdHRoaXMudGFza0V4ZWN1dG9ycyA9IChuZXdFeGVjdXRvcnMgIT09IHVuZGVmaW5lZClcblx0XHRcdD8gbmV3RXhlY3V0b3JzXG5cdFx0XHQ6IFtdO1xuXHR9XG5cblx0c2V0IGlkKG5ld0lkKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCfQndC10LvRjNC30Y8g0LzQtdC90Y/RgtGMIElELicpO1xuXHRcdHJldHVybjtcblx0fVxuXHRnZXQgaWQoKSB7XG5cdFx0cmV0dXJuIHRoaXMudGFza0lkO1xuXHR9XG5cblx0c2V0IHRpdGxlKHN0cikge1xuXHRcdHRoaXMudGFza1RpdGxlID0gc3RyO1xuXHR9XG5cdGdldCB0aXRsZSgpe1xuXHRcdHJldHVybiB0aGlzLnRhc2tUaXRsZTtcblx0fVxuXG5cblxufSIsImNsYXNzIFRlYW0gZXh0ZW5kcyBMaWJPYmplY3Qge1xuXHRjb25zdHJ1Y3RvcihuZXdJZCwgbmV3TmFtZSwgbmV3VGVhbW1hdGVzKSB7XG5cdFx0c3VwZXIoKTtcblx0XHR0aGlzLnRlYW1JZCA9IG5ld0lkO1xuXHRcdHRoaXMubmFtZSA9IG5ld05hbWU7XG5cdFx0dGhpcy50ZWFtVGVhbW1hdGVzID0gKG5ld1RlYW1tYXRlcyAhPT0gdW5kZWZpbmVkKSBcblx0XHRcdD8gbmV3VGVhbW1hdGVzXG5cdFx0XHQ6IFtdO1xuXHR9XG5cblx0c2V0IGlkKG5ld0lkKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCfQndC10LvRjNC30Y8g0LzQtdC90Y/RgtGMIElELicpO1xuXHRcdHJldHVybjtcblx0fVxuXHRnZXQgaWQoKSB7XG5cdFx0cmV0dXJuIHRoaXMudGVhbUlkO1xuXHR9XG5cblx0c2V0IG5hbWUoc3RyKSB7XG5cdFx0dGhpcy50ZWFtTmFtZSA9IHN0cjtcblx0fVxuXHRnZXQgbmFtZSgpe1xuXHRcdHJldHVybiB0aGlzLnRlYW1OYW1lO1xuXHR9XG5cblx0YWRkVGVhbW1hdGUoc3R1ZGVudCkge1xuXHRcdHRoaXMudGVhbVRlYW1tYXRlcy5wdXNoKHN0dWRlbnQpO1xuXHR9XG5cblx0cmVtb3ZlVGVhbW1hdGVzKGFycikge1xuXHRcdGxldCBzZWxmID0gdGhpcztcblx0XHRhcnIuZm9yRWFjaChmdW5jdGlvbihpdGVtLCBpLCBhcnIpe1xuXHRcdFx0bGV0IHN0dWRlbnQgPSBMaWIuc2VsZWN0KGl0ZW0pO1xuXHRcdFx0aWYgKCFzdHVkZW50KSBjb25zb2xlLmxvZygn0KHRgtGD0LTQtdC90YIgJysgaXRlbSArJyDQvdC1INC90LDQudC00LXQvS4nKTtcblx0XHRcdGxldCBpbmRleCA9IHNlbGYudGVhbVRlYW1tYXRlcy5pbmRleE9mKHN0dWRlbnQpO1xuXHRcdFx0aWYgKGluZGV4ICE9PSAtMSkge1xuXHRcdFx0XHRzZWxmLnRlYW1UZWFtbWF0ZXMuc3BsaWNlKGluZGV4LDEpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG59IiwiY2xhc3MgTWVudG9yIGV4dGVuZHMgTGliT2JqZWN0IHtcblx0Y29uc3RydWN0b3IobmV3SWQsIG5ld05hbWUsIG5ld1ByZWZlcnJlZFN0dWRlbnRzTGlzdCkge1xuXHRcdHN1cGVyKCk7XG5cdFx0dGhpcy5tZW50b3JJZCA9IG5ld0lkO1xuXHRcdHRoaXMubmFtZSA9IG5ld05hbWU7XG5cdFx0dGhpcy5wcmVmZXJyZWRTdHVkZW50c0xpc3QgPSAobmV3UHJlZmVycmVkU3R1ZGVudHNMaXN0ICE9PSB1bmRlZmluZWQpXG5cdFx0XHQ/IG5ld1ByZWZlcnJlZFN0dWRlbnRzTGlzdFxuXHRcdFx0OiBbXTtcblx0fVxuXG5cdHNldCBpZChuZXdJZCkge1xuXHRcdHRocm93IG5ldyBFcnJvcign0J3QtdC70YzQt9GPINC80LXQvdGP0YLRjCBJRC4nKTtcblx0XHRyZXR1cm47XG5cdH1cblx0Z2V0IGlkKCkge1xuXHRcdHJldHVybiB0aGlzLm1lbnRvcklkO1xuXHR9XG5cblx0c2V0IG5hbWUoc3RyKSB7XG5cdFx0dGhpcy5tZW50b3JOYW1lID0gc3RyO1xuXHR9XG5cdGdldCBuYW1lKCl7XG5cdFx0cmV0dXJuIHRoaXMubWVudG9yTmFtZTtcblx0fVxuXG5cdHNldCBwcmVmZXJyZWRTdHVkZW50c0xpc3QoYXJyKSB7XG5cdFx0aWYgKHR5cGVvZiBhcnIgIT09IHR5cGVvZiBbXSApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcign0KHQv9C40YHQvtC6INC00L7Qu9C20LXQvSDQsdGL0YLRjCDQvNCw0YHRgdC40LLQvtC8LicpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0fVxuXG5cdFxufSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
